<!doctype html>
<head><meta charset="utf-8">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/base16/solarized-light.min.css"><link rel="stylesheet" href="assets/ecmarkup.css"><link rel="stylesheet" href="./spec.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
<script src="./spec.js"></script>
<title>Pattern Matching</title><script src="assets/ecmarkup.js?cache=NJPaYXhi" defer=""></script></head><body><div id="shortcuts-help">
<ul>
  <li><span>Toggle shortcuts help</span><code>?</code></li>
  <li><span>Toggle "can call user code" annotations</span><code>u</code></li>

  <li><span>Jump to search box</span><code>/</code></li>
</ul></div><div id="menu-toggle"><svg xmlns="http://www.w3.org/2000/svg" style="width:100%; height:100%; stroke:currentColor" viewBox="0 0 120 120">
      <title>Menu</title>
      <path stroke-width="10" stroke-linecap="round" d="M30,60 h60  M30,30 m0,5 h60  M30,90 m0,-5 h60"></path>
    </svg></div><div id="menu-spacer" class="menu-spacer"></div><div id="menu"><div id="menu-search"><input type="text" id="menu-search-box" placeholder="Search..."><div id="menu-search-results" class="inactive"></div></div><div id="menu-pins"><div class="menu-pane-header">Pins</div><ul id="menu-pins-list"></ul></div><div class="menu-pane-header">Table of Contents</div><div id="menu-toc"><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-ecmascript-data-types-and-values" title="ECMAScript Data Types and Values"><span class="secnum">6</span> ECMAScript Data Types and Values</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-ecmascript-language-types" title="ECMAScript Language Types"><span class="secnum">6.1</span> ECMAScript Language Types</a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-ecmascript-language-types-symbol-type" title="The Symbol Type"><span class="secnum">6.1.5</span> The Symbol Type</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-well-known-symbols" title="Well-Known Symbols"><span class="secnum">6.1.5.1</span> Well-Known Symbols</a></li></ol></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-pattern-matching" title="Pattern Matching"><span class="secnum">30</span> <ins>Pattern Matching</ins></a><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-match-patterns" title="Match Patterns"><span class="secnum">30.1</span> Match Patterns</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-match-patterns-early-errors" title="Static Semantics: Early Errors"><span class="secnum">30.1.1</span> SS: Early Errors</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-match-pattern-semantics" title="Match Pattern Semantics"><span class="secnum">30.2</span> Match Pattern Semantics</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-match-pattern-matches" title="Runtime Semantics: MatchPatternMatches"><span class="secnum">30.2.1</span> RS: MatchPatternMatches</a></li><li><span class="item-toggle-none"></span><a href="#sec-primitive-pattern-matches" title="Runtime Semantics: PrimitivePatternMatches"><span class="secnum">30.2.2</span> RS: PrimitivePatternMatches</a></li><li><span class="item-toggle-none"></span><a href="#sec-member-expression-pattern-matches" title="Runtime Semantics: MemberExpressionPatternMatches"><span class="secnum">30.2.3</span> RS: MemberExpressionPatternMatches</a></li><li><span class="item-toggle-none"></span><a href="#sec-unary-algebraic-pattern-matches" title="Runtime Semantics: UnaryAlgebraicPatternMatches"><span class="secnum">30.2.4</span> RS: UnaryAlgebraicPatternMatches</a></li><li><span class="item-toggle-none"></span><a href="#sec-combined-match-pattern-matches" title="Runtime Semantics: CombinedMatchPatternMatches"><span class="secnum">30.2.5</span> RS: CombinedMatchPatternMatches</a></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-abstract-operations-for-pattern-matching" title="Abstract Operations for Pattern Matching"><span class="secnum">30.3</span> Abstract Operations for Pattern Matching</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-invoke-custom-matcher" title="InvokeCustomMatcher ( matcher, subject, kind )"><span class="secnum">30.3.1</span> <ins>InvokeCustomMatcher ( <var>matcher</var>, <var>subject</var>, <var>kind</var> )</ins></a></li></ol></li></ol></li><li><span class="item-toggle">+</span><a href="#sec-notes" title="Editor's notes"><span class="secnum">31</span> Editor's notes</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-notes-layering" title="Layering"><span class="secnum">31.1</span> Layering</a></li><li><span class="item-toggle-none"></span><a href="#sec-notes-code-example" title="Code example"><span class="secnum">31.2</span> Code example</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-copyright-and-software-license" title="Copyright &amp; Software License"><span class="secnum">A</span> Copyright &amp; Software License</a></li></ol></div></div><div id="spec-container"><h1 class="version">Stage 1 Draft / October 29, 2023</h1><h1 class="title">Pattern Matching</h1>
<style>
  emu-note[code] > .note {
    font-size: 0;
  }
  emu-note[code] > .note::before {
    content: "Example";
    font-size: 18px;
  }
  emu-note[code] pre {
    margin: 0;
  }
  pre.inline {
    display: inline;
  }
  pre.inline code {
    display: inline;
    font-style: italic;
    text-decoration: underline;
  }
</style>

<p>Work in progress. Before continuing, please read the&nbsp;<emu-xref href="#sec-notes" title="" id="_ref_0"><a href="#sec-notes">Editor's notes</a></emu-xref>.</p>

<emu-clause id="sec-ecmascript-data-types-and-values" aoid="Type" number="6">
  <h1><span class="secnum">6</span> ECMAScript Data Types and Values</h1>
  <emu-clause id="sec-ecmascript-language-types">
    <h1><span class="secnum">6.1</span> ECMAScript Language Types</h1>

    <emu-clause id="sec-ecmascript-language-types-symbol-type" number="5">
      <h1><span class="secnum">6.1.5</span> The Symbol Type</h1>
      <emu-clause id="sec-well-known-symbols">
        <h1><span class="secnum">6.1.5.1</span> Well-Known Symbols</h1>
        <emu-table id="table-1" caption="Well-known Symbols"><figure><figcaption>Table 1: Well-known Symbols</figcaption>
          <table>
            <tbody>
            <tr>
              <th>
                Specification Name
              </th>
              <th>
                <var class="field">[[Description]]</var>
              </th>
              <th>
                Value and Purpose
              </th>
            </tr>
            <tr>
              <td>
                <ins><dfn tabindex="-1">@@customMatcher</dfn></ins>
              </td>
              <td>
                <ins><code>"Symbol.customMatcher"</code></ins>
              </td>
              <td>
                <ins>A method that performs custom pattern matching semantics. Called by the semantics of the pattern matching features.</ins>
              </td>
            </tr>
            </tbody>
          </table>
        </figure></emu-table>
      </emu-clause>
    </emu-clause>
  </emu-clause>
</emu-clause>

<emu-clause id="sec-pattern-matching" number="30">
  <h1><span class="secnum">30</span> <ins>Pattern Matching</ins></h1>

  <emu-clause id="sec-match-patterns">
    <h1><span class="secnum">30.1</span> Match Patterns</h1>
    <h2>Syntax</h2>
    <emu-grammar type="definition"><emu-production name="MatchPattern" params="Yield, Await" id="prod-MatchPattern">
    <emu-nt params="Yield, Await"><a href="#prod-MatchPattern">MatchPattern</a><emu-mods><emu-params>[Yield, Await]</emu-params></emu-mods></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="iwqh9pom" id="prod-KUcUUgsn">
        <emu-t>(</emu-t>
        <emu-nt params="?Yield, ?Await" id="_ref_20"><a href="#prod-MatchPattern">MatchPattern</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt>
        <emu-t>)</emu-t>
    </emu-rhs>
    <emu-rhs a="sgh9k7d8" id="prod-NnfvhTBM">
        <emu-nt id="_ref_21"><a href="#prod-PrimitivePattern">PrimitivePattern</a></emu-nt>
    </emu-rhs>
    <emu-rhs a="y46cfqhm" id="prod-dtu4srcz">
        <emu-nt params="?Yield, ?Await" id="_ref_22"><a href="#prod-MemberExpressionPattern">MemberExpressionPattern</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt>
    </emu-rhs>
    <emu-rhs a="6m-vwede" id="prod-en0pW04U">
        <emu-nt params="?Yield, ?Await" id="_ref_23"><a href="#prod-UnaryAlgebraicPattern">UnaryAlgebraicPattern</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt>
    </emu-rhs>
    <emu-rhs a="_7vcs4wd" id="prod-LAj8DpMp">
        <emu-nt params="?Yield, ?Await" id="_ref_24"><a href="#prod-CombinedMatchPattern">CombinedMatchPattern</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>

    <!-- #region PrimitivePattern -->
    <emu-grammar type="definition"><emu-production name="PrimitivePattern" id="prod-PrimitivePattern">
    <emu-nt><a href="#prod-PrimitivePattern">PrimitivePattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="kul-a19e" id="prod-lZG2aTTb">
        <emu-nt><a href="https://tc39.es/ecma262/#prod-Literal">Literal</a></emu-nt>
    </emu-rhs>
    <emu-rhs a="e_otk8es" id="prod-rqU7_eLx">
        <emu-nt><a href="https://tc39.es/ecma262/#prod-NoSubstitutionTemplate">NoSubstitutionTemplate</a></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
    <emu-note code=""><span class="note">Note 1</span><div class="note-contents">
      <pre><code class="javascript hljs">value is <span class="hljs-literal">null</span>;
value is <span class="hljs-literal">true</span>;
value is <span class="hljs-number">1_000_000</span>;
value is <span class="hljs-string">"string"</span>;
value is <span class="hljs-string">`line 1
line 2`</span>;</code></pre>
    </div></emu-note>
    <emu-note type="editor"><span class="note">Editor's Note</span><div class="note-contents">
      Preserve the interpolation syntax for (1) <a href="https://github.com/tc39/proposal-pattern-matching/pull/293#discussion_r1350757767" target="_blank">concerns about arbitrary expression interpolation</a> and (2) <a target="_blank" href="https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html#inference-with-template-literals">intuitive string matching</a>.
      For example, match <code>"com.example:method()"</code> by
      <pre><code class="javascript hljs">when <span class="hljs-string">`<span class="hljs-subst">${isPackageName and <span class="hljs-keyword">let</span> pkg}</span>:<span class="hljs-subst">${isIdentifier and <span class="hljs-keyword">let</span> method}</span>()`</span>: ...,</code></pre>
    </div></emu-note>
    <!-- endregion -->

    <!-- #region MemberExpressionPattern -->
    <emu-grammar type="definition"><emu-production name="MemberExpressionPattern" params="Yield, Await" id="prod-MemberExpressionPattern">
    <emu-nt params="Yield, Await"><a href="#prod-MemberExpressionPattern">MemberExpressionPattern</a><emu-mods><emu-params>[Yield, Await]</emu-params></emu-mods></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="uxdrsrnt" id="prod-G4gXeSPg">
        <emu-nt params="?Yield, ?Await" id="_ref_25"><a href="#prod-PatternMatchingMemberExpression">PatternMatchingMemberExpression</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt>
    </emu-rhs>
</emu-production>
<emu-production name="PatternMatchingMemberExpression" params="Yield, Await" id="prod-PatternMatchingMemberExpression">
    <emu-nt params="Yield, Await"><a href="#prod-PatternMatchingMemberExpression">PatternMatchingMemberExpression</a><emu-mods><emu-params>[Yield, Await]</emu-params></emu-mods></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="dlsgch-w">
        <emu-nt params="?Yield, ?Await"><a href="https://tc39.es/ecma262/#prod-IdentifierReference">IdentifierReference</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt>
    </emu-rhs>
    <emu-rhs a="czfvorss">
        <emu-nt params="?Yield, ?Await" id="_ref_26"><a href="#prod-MemberExpressionPattern">MemberExpressionPattern</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt>
        <emu-t>.</emu-t>
        <emu-nt><a href="https://tc39.es/ecma262/#prod-IdentifierName">IdentifierName</a></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
    <emu-note code=""><span class="note">Note 2</span><div class="note-contents">
      <pre><code class="javascript hljs">value is <span class="hljs-literal">undefined</span>;
value is <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>;</code></pre>
    </div></emu-note>
    <emu-note type="editor"><span class="note">Editor's Note</span><div class="note-contents">
      The <emu-nt id="_ref_27"><a href="#prod-MemberExpressionPattern">MemberExpressionPattern</a></emu-nt> <code>.</code> <emu-nt><a href="https://tc39.es/ecma262/#prod-IdentifierName">IdentifierName</a></emu-nt> production is removable.
      <pre><code class="javascript hljs">value is <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>;
<span class="hljs-comment">// can be written as:</span>
<span class="hljs-keyword">const</span> { <span class="hljs-variable constant_">PI</span> } = <span class="hljs-title class_">Math</span>;
value is <span class="hljs-variable constant_">PI</span>;</code></pre>
      It is similar to the <a href="https://tc39.es/proposal-decorators/#sec-new-syntax" target="_blank">DecoratorMemberExpression</a>.<br>
      Should we allow <code>MemberExpressionPattern[expr]</code> to match with computed property names?<br>
      Should we cache the <code><var class="field">[[Get]]</var></code> call as we do in the object match patterns?
    </div></emu-note>
    <!-- endregion -->

    <!-- #region UnaryAlgebraicPattern -->
    <emu-grammar type="definition"><emu-production name="UnaryAlgebraicPattern" params="Yield, Await" id="prod-UnaryAlgebraicPattern">
    <emu-nt params="Yield, Await"><a href="#prod-UnaryAlgebraicPattern">UnaryAlgebraicPattern</a><emu-mods><emu-params>[Yield, Await]</emu-params></emu-mods></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="qi2orlde">
        <emu-t>+</emu-t>
        <emu-nt params="?Yield, ?Await" id="_ref_28"><a href="#prod-PatternMatchingMemberExpression">PatternMatchingMemberExpression</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt>
    </emu-rhs>
    <emu-rhs a="vdzozs8g">
        <emu-t>-</emu-t>
        <emu-nt params="?Yield, ?Await" id="_ref_29"><a href="#prod-PatternMatchingMemberExpression">PatternMatchingMemberExpression</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt>
    </emu-rhs>
    <emu-rhs a="1epwai_f">
        <emu-t>+</emu-t>
        <emu-nt><a href="https://tc39.es/ecma262/#prod-NumericLiteral">NumericLiteral</a></emu-nt>
    </emu-rhs>
    <emu-rhs a="u8w2p_fz">
        <emu-t>-</emu-t>
        <emu-nt><a href="https://tc39.es/ecma262/#prod-NumericLiteral">NumericLiteral</a></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
    <emu-note code=""><span class="note">Note 3</span><div class="note-contents">
      <pre><code class="javascript hljs">value is -<span class="hljs-number">0</span>; <span class="hljs-comment">// not matching `+0` and vice versa</span>
value is -<span class="hljs-title class_">Infinity</span>;
value is -<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>;</code></pre>
    </div></emu-note>
    <emu-note type="editor"><span class="note">Editor's Note</span><div class="note-contents">
      This production is removable, but it will be harder to handle with <code>+0</code> and <code>-0</code>.
      <pre><code class="javascript hljs">value is -<span class="hljs-title class_">Infinity</span>;
<span class="hljs-comment">// can be written as:</span>
<span class="hljs-keyword">const</span> negInf = -<span class="hljs-title class_">Infinity</span>;
value is negInf;</code></pre>
    </div></emu-note>
    <!-- endregion -->

    <!-- #region CombinedMatchPattern -->
    <emu-grammar type="definition"><emu-production name="CombinedMatchPattern" params="Yield, Await" id="prod-CombinedMatchPattern">
    <emu-nt params="Yield, Await"><a href="#prod-CombinedMatchPattern">CombinedMatchPattern</a><emu-mods><emu-params>[Yield, Await]</emu-params></emu-mods></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="ao53rdyl" id="prod-a_2cW9fV">
        <emu-nt params="?Yield, ?Await" id="_ref_30"><a href="#prod-MatchPattern">MatchPattern</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt>
        <emu-t>and</emu-t>
        <emu-nt params="?Yield, ?Await" id="_ref_31"><a href="#prod-MatchPattern">MatchPattern</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt>
    </emu-rhs>
    <emu-rhs a="nhqoi23u" id="prod-BMX8uZDG">
        <emu-nt params="?Yield, ?Await" id="_ref_32"><a href="#prod-MatchPattern">MatchPattern</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt>
        <emu-t>or</emu-t>
        <emu-nt params="?Yield, ?Await" id="_ref_33"><a href="#prod-MatchPattern">MatchPattern</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt>
    </emu-rhs>
    <emu-rhs a="qryeevni" id="prod-4IhLPseH">
        <emu-t>not</emu-t>
        <emu-nt params="?Yield, ?Await" id="_ref_34"><a href="#prod-MatchPattern">MatchPattern</a><emu-mods><emu-params>[?Yield, ?Await]</emu-params></emu-mods></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
    <emu-note code=""><span class="note">Note 4</span><div class="note-contents">
      <pre><code class="javascript hljs">value is not <span class="hljs-number">0</span>;
value is <span class="hljs-string">"true"</span> or <span class="hljs-string">"yes"</span>;</code></pre>
    </div></emu-note>
    <!-- endregion -->

    <emu-clause id="sec-match-patterns-early-errors">
      <h1><span class="secnum">30.1.1</span> Static Semantics: Early Errors</h1>
      <emu-grammar><emu-production name="CombinedMatchPattern">
    <emu-nt><a href="#prod-CombinedMatchPattern">CombinedMatchPattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="4lmqei0y">
        <emu-nt id="_ref_35"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt>
        <emu-t>and</emu-t>
        <emu-nt id="_ref_36"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
      <ul>
        <li>It is a Syntax Error if either of <emu-nt id="_ref_37"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt> is a <emu-nt id="_ref_38"><a href="#prod-CombinedMatchPattern">CombinedMatchPattern</a></emu-nt> and does not match this production.</li>
      </ul>
      <emu-grammar><emu-production name="CombinedMatchPattern">
    <emu-nt><a href="#prod-CombinedMatchPattern">CombinedMatchPattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="9wuvrand">
        <emu-nt id="_ref_39"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt>
        <emu-t>or</emu-t>
        <emu-nt id="_ref_40"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
      <ul>
        <li>It is a Syntax Error if either of <emu-nt id="_ref_41"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt> is a <emu-nt id="_ref_42"><a href="#prod-CombinedMatchPattern">CombinedMatchPattern</a></emu-nt> and does not match this production.</li>
      </ul>
      <emu-grammar><emu-production name="CombinedMatchPattern">
    <emu-nt><a href="#prod-CombinedMatchPattern">CombinedMatchPattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="_ieabtbd">
        <emu-t>not</emu-t>
        <emu-nt id="_ref_43"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
      <ul>
        <li>It is a Syntax Error if the <emu-nt id="_ref_44"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt> is a <emu-nt id="_ref_45"><a href="#prod-CombinedMatchPattern">CombinedMatchPattern</a></emu-nt>.</li>
      </ul>
      <emu-note code=""><span class="note">Note</span><div class="note-contents"><pre><code class="javascript hljs">value is a and b and c; <span class="hljs-comment">// no Syntax Error</span>
value is a or b or c; <span class="hljs-comment">// no Syntax Error</span>

value is a and b or c; <span class="hljs-comment">// Syntax Error</span>
value is (a and b) or c; <span class="hljs-comment">// no Syntax Error</span>
value is a and (b or c); <span class="hljs-comment">// no Syntax Error</span>

value is not not a; <span class="hljs-comment">// Syntax Error</span>
value is not (not a); <span class="hljs-comment">// no Syntax Error</span>

value is not a or b; <span class="hljs-comment">// Syntax Error</span>
value is not (a or b); <span class="hljs-comment">// no Syntax Error</span></code></pre></div></emu-note>
    </emu-clause>
  </emu-clause>
  <emu-clause id="sec-match-pattern-semantics">
    <h1><span class="secnum">30.2</span> Match Pattern Semantics</h1>

    <emu-clause id="sec-match-pattern-matches" type="sdo" aoid="MatchPatternMatches">
      <h1><span class="secnum">30.2.1</span> Runtime Semantics: MatchPatternMatches</h1>
      <p>The <emu-xref href="#sec-algorithm-conventions-syntax-directed-operations"><a href="https://tc39.es/ecma262/#sec-algorithm-conventions-syntax-directed-operations">syntax-directed operation</a></emu-xref> MatchPatternMatches takes argument <var>subject</var> (an <emu-xref href="#sec-ecmascript-language-types" id="_ref_1"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>) and returns either a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">normal completion containing</a></emu-xref> a Boolean or an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">abrupt completion</a></emu-xref>. It is defined piecewise over the following productions:</p>
      <emu-grammar><emu-production name="MatchPattern" collapsed="">
    <emu-nt><a href="#prod-MatchPattern">MatchPattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="59hl_iep" id="prod-U80C8biY">
        <emu-t>(</emu-t>
        <emu-nt id="_ref_46"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt>
        <emu-t>)</emu-t>
    </emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>Return ?&nbsp;<emu-xref aoid="MatchPatternMatches" id="_ref_2"><a href="#sec-match-pattern-matches" class="e-user-code">MatchPatternMatches</a></emu-xref> of <emu-nt id="_ref_47"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt> with arguments <var>subject</var>.</li></ol></emu-alg>
      <emu-grammar><emu-production name="MatchPattern" collapsed="">
    <emu-nt><a href="#prod-MatchPattern">MatchPattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="sgh9k7d8" id="prod-6fPS70C2"><emu-nt id="_ref_48"><a href="#prod-PrimitivePattern">PrimitivePattern</a></emu-nt></emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>Return <emu-xref aoid="PrimitivePatternMatches" id="_ref_3"><a href="#sec-primitive-pattern-matches">PrimitivePatternMatches</a></emu-xref> of <emu-nt id="_ref_49"><a href="#prod-PrimitivePattern">PrimitivePattern</a></emu-nt> with arguments <var>subject</var>.</li></ol></emu-alg>
      <emu-grammar><emu-production name="MatchPattern" collapsed="">
    <emu-nt><a href="#prod-MatchPattern">MatchPattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="zftkm5nb" id="prod-vBMoWeeV"><emu-nt id="_ref_50"><a href="#prod-MemberExpressionPattern">MemberExpressionPattern</a></emu-nt></emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>Return ?&nbsp;<emu-xref aoid="MemberExpressionPatternMatches" id="_ref_4"><a href="#sec-member-expression-pattern-matches" class="e-user-code">MemberExpressionPatternMatches</a></emu-xref> of <emu-nt id="_ref_51"><a href="#prod-MemberExpressionPattern">MemberExpressionPattern</a></emu-nt> with arguments <var>subject</var>.</li></ol></emu-alg>
      <emu-grammar><emu-production name="MatchPattern" collapsed="">
    <emu-nt><a href="#prod-MatchPattern">MatchPattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="gq_1p9nv" id="prod-MW-Egi0C"><emu-nt id="_ref_52"><a href="#prod-UnaryAlgebraicPattern">UnaryAlgebraicPattern</a></emu-nt></emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>Return ?&nbsp;<emu-xref aoid="UnaryAlgebraicPatternMatches" id="_ref_5"><a href="#sec-unary-algebraic-pattern-matches" class="e-user-code">UnaryAlgebraicPatternMatches</a></emu-xref> of <emu-nt id="_ref_53"><a href="#prod-UnaryAlgebraicPattern">UnaryAlgebraicPattern</a></emu-nt> with arguments <var>subject</var>.</li></ol></emu-alg>
      <emu-grammar><emu-production name="MatchPattern" collapsed="">
    <emu-nt><a href="#prod-MatchPattern">MatchPattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="zldm3trl" id="prod-EquXXU0V"><emu-nt id="_ref_54"><a href="#prod-CombinedMatchPattern">CombinedMatchPattern</a></emu-nt></emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>Return ?&nbsp;<emu-xref aoid="CombinedMatchPatternMatches" id="_ref_6"><a href="#sec-combined-match-pattern-matches" class="e-user-code">CombinedMatchPatternMatches</a></emu-xref> of <emu-nt id="_ref_55"><a href="#prod-CombinedMatchPattern">CombinedMatchPattern</a></emu-nt> with arguments <var>subject</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-primitive-pattern-matches" type="sdo" aoid="PrimitivePatternMatches">
      <h1><span class="secnum">30.2.2</span> Runtime Semantics: PrimitivePatternMatches</h1>
      <p>The <emu-xref href="#sec-algorithm-conventions-syntax-directed-operations"><a href="https://tc39.es/ecma262/#sec-algorithm-conventions-syntax-directed-operations">syntax-directed operation</a></emu-xref> PrimitivePatternMatches takes argument <var>subject</var> (an <emu-xref href="#sec-ecmascript-language-types" id="_ref_7"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>) and returns a Boolean. It is defined piecewise over the following productions:</p>
      <emu-grammar><emu-production name="PrimitivePattern" collapsed="">
    <emu-nt><a href="#prod-PrimitivePattern">PrimitivePattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="kul-a19e" id="prod-mlLTmHeP"><emu-nt><a href="https://tc39.es/ecma262/#prod-Literal">Literal</a></emu-nt></emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>Return <emu-xref aoid="SameValueZero"><a href="https://tc39.es/ecma262/#sec-samevaluezero">SameValueZero</a></emu-xref>(<var>subject</var>, !&nbsp;<emu-xref aoid="Evaluation"><a href="https://tc39.es/ecma262/#sec-evaluation">Evaluation</a></emu-xref> of <emu-nt><a href="https://tc39.es/ecma262/#prod-Literal">Literal</a></emu-nt>).</li></ol></emu-alg>
      <emu-grammar><emu-production name="PrimitivePattern" collapsed="">
    <emu-nt><a href="#prod-PrimitivePattern">PrimitivePattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="e_otk8es" id="prod-eFLzsKUd"><emu-nt><a href="https://tc39.es/ecma262/#prod-NoSubstitutionTemplate">NoSubstitutionTemplate</a></emu-nt></emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>Return <emu-xref aoid="SameValueNonNumber"><a href="https://tc39.es/ecma262/#sec-samevaluenonnumber">SameValueNonNumber</a></emu-xref>(<var>subject</var>, !&nbsp;<emu-xref aoid="Evaluation"><a href="https://tc39.es/ecma262/#sec-evaluation">Evaluation</a></emu-xref> of <emu-nt><a href="https://tc39.es/ecma262/#prod-NoSubstitutionTemplate">NoSubstitutionTemplate</a></emu-nt>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-member-expression-pattern-matches" type="sdo" aoid="MemberExpressionPatternMatches">
      <h1><span class="secnum">30.2.3</span> Runtime Semantics: MemberExpressionPatternMatches</h1>
      <p>The <emu-xref href="#sec-algorithm-conventions-syntax-directed-operations"><a href="https://tc39.es/ecma262/#sec-algorithm-conventions-syntax-directed-operations">syntax-directed operation</a></emu-xref> MemberExpressionPatternMatches takes argument <var>subject</var> (an <emu-xref href="#sec-ecmascript-language-types" id="_ref_8"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>) and returns either a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">normal completion containing</a></emu-xref> a Boolean or an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">abrupt completion</a></emu-xref>. It is defined piecewise over the following productions:</p>
      <emu-grammar><emu-production name="MemberExpressionPattern" collapsed="">
    <emu-nt><a href="#prod-MemberExpressionPattern">MemberExpressionPattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="887ylmg0" id="prod--tiCo4Kg"><emu-nt id="_ref_56"><a href="#prod-PatternMatchingMemberExpression">PatternMatchingMemberExpression</a></emu-nt></emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>Let <var>expr</var> be the <emu-nt><a href="https://tc39.es/ecma262/#prod-MemberExpression">MemberExpression</a></emu-nt> that is <emu-xref href="#sec-syntactic-grammar"><a href="https://tc39.es/ecma262/#sec-syntactic-grammar">covered</a></emu-xref> by <emu-nt id="_ref_57"><a href="#prod-PatternMatchingMemberExpression">PatternMatchingMemberExpression</a></emu-nt>.</li><li>Let <var>ref</var> be ?&nbsp;<emu-xref aoid="Evaluation"><a href="https://tc39.es/ecma262/#sec-evaluation" class="e-user-code">Evaluation</a></emu-xref> of <var>expr</var>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="GetValue"><a href="https://tc39.es/ecma262/#sec-getvalue" class="e-user-code">GetValue</a></emu-xref>(<var>ref</var>).</li><li>Let <var>result</var> be ?&nbsp;<emu-xref aoid="InvokeCustomMatcher" id="_ref_9"><a href="#sec-invoke-custom-matcher" class="e-user-code">InvokeCustomMatcher</a></emu-xref>(<var>value</var>, <var>subject</var>, <emu-const>boolean</emu-const>).</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>result</var> <emu-xref href="#sec-ecmascript-language-types-boolean-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-boolean-type">is a Boolean</a></emu-xref>.</li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-unary-algebraic-pattern-matches" type="sdo" aoid="UnaryAlgebraicPatternMatches">
      <h1><span class="secnum">30.2.4</span> Runtime Semantics: UnaryAlgebraicPatternMatches</h1>
      <p>The <emu-xref href="#sec-algorithm-conventions-syntax-directed-operations"><a href="https://tc39.es/ecma262/#sec-algorithm-conventions-syntax-directed-operations">syntax-directed operation</a></emu-xref> UnaryAlgebraicPatternMatches takes argument <var>subject</var> (an <emu-xref href="#sec-ecmascript-language-types" id="_ref_10"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>) and returns either a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">normal completion containing</a></emu-xref> a Boolean or an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">abrupt completion</a></emu-xref>. It is defined piecewise over the following productions:</p>
      <emu-grammar><emu-production name="UnaryAlgebraicPattern">
<emu-nt><a href="#prod-UnaryAlgebraicPattern">UnaryAlgebraicPattern</a></emu-nt> <emu-geq>:</emu-geq> </emu-production>
</emu-grammar>
      <emu-alg><ol><li>Let <var>expr</var> be the <emu-nt><a href="https://tc39.es/ecma262/#prod-MemberExpression">MemberExpression</a></emu-nt> that is <emu-xref href="#sec-syntactic-grammar"><a href="https://tc39.es/ecma262/#sec-syntactic-grammar">covered</a></emu-xref> by <emu-nt id="_ref_58"><a href="#prod-UnaryAlgebraicPattern">UnaryAlgebraicPattern</a></emu-nt>.</li><li>Let <var>ref</var> be ?&nbsp;<emu-xref aoid="Evaluation"><a href="https://tc39.es/ecma262/#sec-evaluation" class="e-user-code">Evaluation</a></emu-xref> of <var>expr</var>.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="GetValue"><a href="https://tc39.es/ecma262/#sec-getvalue" class="e-user-code">GetValue</a></emu-xref>(<var>ref</var>).</li><li>Return <emu-xref aoid="SameValue"><a href="https://tc39.es/ecma262/#sec-samevalue">SameValue</a></emu-xref>(<var>subject</var>, <var>value</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-combined-match-pattern-matches" type="sdo" aoid="CombinedMatchPatternMatches">
      <h1><span class="secnum">30.2.5</span> Runtime Semantics: CombinedMatchPatternMatches</h1>
      <p>The <emu-xref href="#sec-algorithm-conventions-syntax-directed-operations"><a href="https://tc39.es/ecma262/#sec-algorithm-conventions-syntax-directed-operations">syntax-directed operation</a></emu-xref> CombinedMatchPatternMatches takes argument <var>subject</var> (an <emu-xref href="#sec-ecmascript-language-types" id="_ref_11"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>) and returns either a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">normal completion containing</a></emu-xref> a Boolean or an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">abrupt completion</a></emu-xref>. It is defined piecewise over the following productions:</p>
      <emu-grammar><emu-production name="CombinedMatchPattern" collapsed="">
    <emu-nt><a href="#prod-CombinedMatchPattern">CombinedMatchPattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="4lmqei0y" id="prod-TGrK8XcZ">
        <emu-nt id="_ref_59"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt>
        <emu-t>and</emu-t>
        <emu-nt id="_ref_60"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>Let <var>leftMatches</var> be ?&nbsp;<emu-xref aoid="MatchPatternMatches" id="_ref_12"><a href="#sec-match-pattern-matches" class="e-user-code">MatchPatternMatches</a></emu-xref> of the first <emu-nt id="_ref_61"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt> with arguments <var>subject</var>.</li><li>If <var>leftMatches</var> is <emu-val>false</emu-val>, return <emu-val>false</emu-val>.</li><li>Return ?&nbsp;<emu-xref aoid="MatchPatternMatches" id="_ref_13"><a href="#sec-match-pattern-matches" class="e-user-code">MatchPatternMatches</a></emu-xref> of the second <emu-nt id="_ref_62"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt> with arguments <var>subject</var>.</li></ol></emu-alg>
      <emu-grammar><emu-production name="CombinedMatchPattern" collapsed="">
    <emu-nt><a href="#prod-CombinedMatchPattern">CombinedMatchPattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="9wuvrand" id="prod-hYdo8hkU">
        <emu-nt id="_ref_63"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt>
        <emu-t>or</emu-t>
        <emu-nt id="_ref_64"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>Let <var>leftMatches</var> be ?&nbsp;<emu-xref aoid="MatchPatternMatches" id="_ref_14"><a href="#sec-match-pattern-matches" class="e-user-code">MatchPatternMatches</a></emu-xref> of the first <emu-nt id="_ref_65"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt> with arguments <var>subject</var>.</li><li>If <var>leftMatches</var> is <emu-val>true</emu-val>, return <emu-val>true</emu-val>.</li><li>Return ?&nbsp;<emu-xref aoid="MatchPatternMatches" id="_ref_15"><a href="#sec-match-pattern-matches" class="e-user-code">MatchPatternMatches</a></emu-xref> of the second <emu-nt id="_ref_66"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt> with arguments <var>subject</var>.</li></ol></emu-alg>
      <emu-grammar><emu-production name="CombinedMatchPattern" collapsed="">
    <emu-nt><a href="#prod-CombinedMatchPattern">CombinedMatchPattern</a></emu-nt> <emu-geq>:</emu-geq> <emu-rhs a="_ieabtbd" id="prod-_QtiVeJ1">
        <emu-t>not</emu-t>
        <emu-nt id="_ref_67"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt>
    </emu-rhs>
</emu-production>
</emu-grammar>
      <emu-alg><ol><li>Let <var>matches</var> be ?&nbsp;<emu-xref aoid="MatchPatternMatches" id="_ref_16"><a href="#sec-match-pattern-matches" class="e-user-code">MatchPatternMatches</a></emu-xref> of <emu-nt id="_ref_68"><a href="#prod-MatchPattern">MatchPattern</a></emu-nt> with arguments <var>subject</var>.</li><li>If <var>matches</var> is <emu-val>true</emu-val>, return <emu-val>false</emu-val>.</li><li>Return <emu-val>true</emu-val>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
  <emu-clause id="sec-abstract-operations-for-pattern-matching">
    <h1><span class="secnum">30.3</span> Abstract Operations for Pattern Matching</h1>

    <emu-clause id="sec-invoke-custom-matcher" type="abstract operation" aoid="InvokeCustomMatcher">
      <h1><span class="secnum">30.3.1</span> <ins>InvokeCustomMatcher ( <var>matcher</var>, <var>subject</var>, <var>kind</var> )</ins></h1>
      <p>The abstract operation InvokeCustomMatcher takes arguments <var>matcher</var> (an <emu-xref href="#sec-ecmascript-language-types" id="_ref_17"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>), <var>subject</var> (an <emu-xref href="#sec-ecmascript-language-types" id="_ref_18"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>), and <var>kind</var> (<emu-const>boolean</emu-const> or <emu-const>list</emu-const>) and returns either a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">normal completion containing</a></emu-xref> either a Boolean or an <emu-xref href="#sec-iterator-records"><a href="https://tc39.es/ecma262/#sec-iterator-records">Iterator Record</a></emu-xref>, or an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">abrupt completion</a></emu-xref>. It performs the following steps when called:</p>
      <emu-alg><ol><li>If <var>matcher</var> <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">is not an Object</a></emu-xref>, then<ol><li>Return <emu-xref aoid="SameValueZero"><a href="https://tc39.es/ecma262/#sec-samevaluezero">SameValueZero</a></emu-xref>(<var>matcher</var>, <var>subject</var>).</li></ol></li><li>Let <var>f</var> be ?&nbsp;<emu-xref aoid="Get"><a href="https://tc39.es/ecma262/#sec-get-o-p" class="e-user-code">Get</a></emu-xref>(<var>matcher</var>, <emu-xref href="#sec-well-known-symbols" id="_ref_19"><a href="#sec-well-known-symbols">@@customMatcher</a></emu-xref>).</li><li>If <emu-xref aoid="IsCallable"><a href="https://tc39.es/ecma262/#sec-iscallable">IsCallable</a></emu-xref>(<var>matcher</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>kind</var> is <emu-const>boolean</emu-const>, let <var>hint</var> be <emu-val>"boolean"</emu-val>.</li><li>Else, let <var>hint</var> be <emu-val>"list"</emu-val>.</li><li>Let <var>result</var> be ?&nbsp;<emu-xref aoid="Call"><a href="https://tc39.es/ecma262/#sec-call" class="e-user-code">Call</a></emu-xref>(<var>f</var>, <var>matcher</var>, « <var>subject</var>, <var>hint</var>&nbsp;»).</li><li>If <var>result</var> is <emu-val>false</emu-val>, return <emu-val>false</emu-val>.</li><li>Else if <var>result</var> is <emu-val>true</emu-val> and <var>kind</var> is <emu-const>boolean</emu-const>, return <emu-val>true</emu-val>.</li><li>Else if <var>result</var> <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">is not an Object</a></emu-xref>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>iterator</var> be ?&nbsp;<emu-xref aoid="GetIterator"><a href="https://tc39.es/ecma262/#sec-getiterator" class="e-user-code">GetIterator</a></emu-xref>(<var>result</var>, <emu-const>sync</emu-const>).</li><li>If <var>kind</var> is <emu-const>boolean</emu-const>, then<ol><li>Perform ?&nbsp;<emu-xref aoid="IteratorClose"><a href="https://tc39.es/ecma262/#sec-iteratorclose" class="e-user-code">IteratorClose</a></emu-xref>(<var>iterator</var>, a <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.es/ecma262/#sec-completion-record-specification-type">normal completion</a></emu-xref> with a value of unused).</li><li>Return <emu-val>true</emu-val>.</li></ol></li><li>Return <var>iterator</var>.</li></ol></emu-alg>
      <emu-note type="editor"><span class="note">Editor's Note</span><div class="note-contents">
        The hint parameter is not a consensus in the champion group yet. This design is to solve <a href="https://github.com/tc39/proposal-pattern-matching/issues/253" target="_blank">runtime performance concerns about custom matchers</a>. The <a href="https://github.com/tc39/proposal-extractors" target="_blank">extractor proposal</a> may add a new hint <emu-const>object</emu-const> for the following syntax.
        <pre><code class="javascript hljs"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Point</span>{ x, y } = expr;</code></pre>
      </div></emu-note>
    </emu-clause>
  </emu-clause>
</emu-clause>

<emu-clause id="sec-notes">
  <h1><span class="secnum">31</span> Editor's notes</h1>
  <emu-clause id="sec-notes-layering">
    <h1><span class="secnum">31.1</span> Layering</h1>
    <p>The pattern-matching champion group designed this proposal with a layering approach. It does not mean the proposal is an MVP. The champion group wishes to ship the proposal as a whole when possible, but we can drop some features if there is strong pushback from the committee.</p>
    <p>This approach allows the champion group to consider how all features combine and also how the proposal should behave if any of the features are missing.</p>
    <p>A feature will have a note if</p>
    <ul>
      <li>it is a convenient feature instead of a necessary feature.</li>
      <li>not all champion group members represent the hope to include it.</li>
    </ul>
  </emu-clause>
  <emu-clause id="sec-notes-code-example">
    <h1><span class="secnum">31.2</span> Code example</h1>
    <p>The code example in the patterns section will be in one of the forms:</p>
    <pre><code class="javascript hljs">value is &lt;pattern&gt;;
when &lt;pattern&gt;: ...,</code></pre>
    <p>The first form is an expression that can be used in any expression position.</p>
    <pre><code class="javascript hljs"><span class="hljs-keyword">const</span> isOk = response is { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">status</span>: &gt; <span class="hljs-number">100</span> and &lt; <span class="hljs-number">400</span> };</code></pre>
    <p>The second form is a clause of the match expression that is only available inside a match expression.</p>
    <pre><code class="javascript hljs"><span class="hljs-keyword">const</span> type = <span class="hljs-title function_">match</span>(<span class="hljs-params">expr</span>) {
  { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">status</span>: &gt; <span class="hljs-number">100</span> and &lt; <span class="hljs-number">400</span> }: <span class="hljs-string">"ok"</span>,
  { <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">status</span>: <span class="hljs-number">404</span> }: <span class="hljs-string">"not found"</span>,
  <span class="hljs-attr">default</span>: <span class="hljs-string">"unknown"</span>,
};</code></pre>
    <p>The "when" <emu-xref href="#sec-keywords-and-reserved-words"><a href="https://tc39.es/ecma262/#sec-keywords-and-reserved-words">keyword</a></emu-xref> was removed, but for the readability of code examples, "when" is kept.</p>
    <p>This document prefers the <code>is</code> form unless the declaration pattern (<code>let x</code>) appears.</p>
  </emu-clause>
</emu-clause><emu-annex id="sec-copyright-and-software-license">
      <h1><span class="secnum">A</span> Copyright &amp; Software License</h1>
      
      <h2>Copyright Notice</h2>
      <p>© 2023 Daniel Rosenwasser,Jack Works,Jordan Harband,Mark Cohen,Ross Kirsling,Tab Atkins</p>

      <h2>Software License</h2>
      <p>All Software contained in this document ("Software") is protected by copyright and is being made available under the "BSD License", included below. This Software may be subject to third party rights (rights from parties other than Ecma International), including patent rights, and no licenses under such third party rights are granted under this license even if the third party concerned is a member of Ecma International. SEE THE ECMA CODE OF CONDUCT IN PATENT MATTERS AVAILABLE AT <a href="https://ecma-international.org/memento/codeofconduct.htm">https://ecma-international.org/memento/codeofconduct.htm</a> FOR INFORMATION REGARDING THE LICENSING OF PATENT CLAIMS THAT ARE REQUIRED TO IMPLEMENT ECMA INTERNATIONAL STANDARDS.</p>

<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p>

<ol>
  <li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
  <li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
  <li>Neither the name of the authors nor Ecma International may be used to endorse or promote products derived from this software without specific prior written permission.</li>
</ol>

<p>THIS SOFTWARE IS PROVIDED BY THE ECMA INTERNATIONAL "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL ECMA INTERNATIONAL BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>

    </emu-annex>
</div></body>