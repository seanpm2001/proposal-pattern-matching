<!doctype html>
<head><meta charset="utf-8">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/base16/solarized-light.min.css"><link rel="stylesheet" href="assets/ecmarkup.css"><link rel="stylesheet" href="./spec.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
<script src="./spec.js"></script>
<title>Pattern Matching</title><script src="assets/ecmarkup.js?cache=NgxzPplH" defer=""></script></head><body><div id="shortcuts-help">
<ul>
  <li><span>Toggle shortcuts help</span><code>?</code></li>
  <li><span>Toggle "can call user code" annotations</span><code>u</code></li>

  <li><span>Jump to search box</span><code>/</code></li>
</ul></div><div id="menu-toggle"><svg xmlns="http://www.w3.org/2000/svg" style="width:100%; height:100%; stroke:currentColor" viewBox="0 0 120 120">
      <title>Menu</title>
      <path stroke-width="10" stroke-linecap="round" d="M30,60 h60  M30,30 m0,5 h60  M30,90 m0,-5 h60"></path>
    </svg></div><div id="menu-spacer" class="menu-spacer"></div><div id="menu"><div id="menu-search"><input type="text" id="menu-search-box" placeholder="Search..."><div id="menu-search-results" class="inactive"></div></div><div id="menu-pins"><div class="menu-pane-header">Pins</div><ul id="menu-pins-list"></ul></div><div class="menu-pane-header">Table of Contents</div><div id="menu-toc"><ol class="toc"><li><span class="item-toggle">+</span><a href="#sec-notes" title="Editor's notes"><span class="secnum">1</span> Editor's notes</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-notes-layering" title="Layering"><span class="secnum">1.1</span> Layering</a></li><li><span class="item-toggle-none"></span><a href="#sec-notes-code-example" title="Code example"><span class="secnum">1.2</span> Code example</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-copyright-and-software-license" title="Copyright &amp; Software License"><span class="secnum">A</span> Copyright &amp; Software License</a></li></ol></div></div><div id="spec-container"><h1 class="version">Stage 1 Draft / October 29, 2023</h1><h1 class="title">Pattern Matching</h1>
<style>
  emu-note[code] > .note {
    font-size: 0;
  }
  emu-note[code] > .note::before {
    content: "Example";
    font-size: 18px;
  }
  emu-note[code] pre {
    margin: 0;
  }
</style>

<p>Work in progress. Before continuing, please read the&nbsp;<emu-xref href="#sec-notes" title="" id="_ref_0"><a href="#sec-notes">Editor's notes</a></emu-xref>.</p>

<emu-clause id="sec-notes">
  <h1><span class="secnum">1</span> Editor's notes</h1>
  <emu-clause id="sec-notes-layering">
    <h1><span class="secnum">1.1</span> Layering</h1>
    <p>The pattern-matching champion group designed this proposal with a layering approach. It does not mean the proposal is an MVP. The champion group wishes to ship the proposal as a whole when possible, but we can drop some features if there is strong pushback from the committee.</p>
    <p>This approach allows the champion group to consider how all features combine and also how the proposal should behave if any of the features are missing.</p>
    <p>A feature will have a note if</p>
    <ul>
      <li>it is a convenient feature instead of a necessary feature.</li>
      <li>not all champion group members represent the hope to include it.</li>
    </ul>
  </emu-clause>
  <emu-clause id="sec-notes-code-example">
    <h1><span class="secnum">1.2</span> Code example</h1>
    <p>The code example in the patterns section will be in one of the forms:</p>
    <pre><code class="javascript hljs">value is &lt;pattern&gt;;
when &lt;pattern&gt;: ...,</code></pre>
    <p>The first form is an expression that can be used in any expression position.</p>
    <pre><code class="javascript hljs"><span class="hljs-keyword">const</span> isOk = response is { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">status</span>: &gt; <span class="hljs-number">100</span> and &lt; <span class="hljs-number">400</span> };</code></pre>
    <p>The second form is a clause of the match expression that is only available inside a match expression.</p>
    <pre><code class="javascript hljs"><span class="hljs-keyword">const</span> type = <span class="hljs-title function_">match</span>(<span class="hljs-params">expr</span>) {
  { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">status</span>: &gt; <span class="hljs-number">100</span> and &lt; <span class="hljs-number">400</span> }: <span class="hljs-string">"ok"</span>,
  { <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">status</span>: <span class="hljs-number">404</span> }: <span class="hljs-string">"not found"</span>,
  <span class="hljs-attr">default</span>: <span class="hljs-string">"unknown"</span>,
};</code></pre>
    <p>The "when" <emu-xref href="#sec-keywords-and-reserved-words"><a href="https://tc39.es/ecma262/#sec-keywords-and-reserved-words">keyword</a></emu-xref> was removed, but for the readability of code examples, "when" is kept.</p>
    <p>This document prefers the <code>is</code> form unless the declaration pattern (<code>let x</code>) appears.</p>
  </emu-clause>
</emu-clause><emu-annex id="sec-copyright-and-software-license">
      <h1><span class="secnum">A</span> Copyright &amp; Software License</h1>
      
      <h2>Copyright Notice</h2>
      <p>Â© 2023 Daniel Rosenwasser,Jack Works,Jordan Harband,Mark Cohen,Ross Kirsling,Tab Atkins</p>

      <h2>Software License</h2>
      <p>All Software contained in this document ("Software") is protected by copyright and is being made available under the "BSD License", included below. This Software may be subject to third party rights (rights from parties other than Ecma International), including patent rights, and no licenses under such third party rights are granted under this license even if the third party concerned is a member of Ecma International. SEE THE ECMA CODE OF CONDUCT IN PATENT MATTERS AVAILABLE AT <a href="https://ecma-international.org/memento/codeofconduct.htm">https://ecma-international.org/memento/codeofconduct.htm</a> FOR INFORMATION REGARDING THE LICENSING OF PATENT CLAIMS THAT ARE REQUIRED TO IMPLEMENT ECMA INTERNATIONAL STANDARDS.</p>

<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p>

<ol>
  <li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
  <li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
  <li>Neither the name of the authors nor Ecma International may be used to endorse or promote products derived from this software without specific prior written permission.</li>
</ol>

<p>THIS SOFTWARE IS PROVIDED BY THE ECMA INTERNATIONAL "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL ECMA INTERNATIONAL BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>

    </emu-annex>
</div></body>